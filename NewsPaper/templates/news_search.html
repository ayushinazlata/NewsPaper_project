{% extends 'flatpages/default.html' %}

{% load custom_filters %}

{% block title %}
    –ü–æ–∏—Å–∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–π
{% endblock title %}

{% block content %}
<h1 style="text-align: center; margin-bottom: 20px;">‚óÑ –ü–û–ò–°–ö –ü–£–ë–õ–ò–ö–ê–¶–ò–ô ‚ñ∫</h1>
<h6 style="text-align: center; color: #555;"><i>–í—ã –≤–∏–¥–∏—Ç–µ {{ news|length }} –∏–∑ {{ paginator.count }} –ø—É–±–ª–∏–∫–∞—Ü–∏–π –Ω–∞ –Ω–∞—à–µ–º –ù–æ–≤–æ—Å—Ç–Ω–æ–º –ø–æ—Ä—Ç–∞–ª–µ!</i></h6>
<hr style="margin: 20px 0;">

<form method="get">
    {{ filterset.form.as_p }}
    <button type="submit">–ò—Å–∫–∞—Ç—å</button>
</form>

<hr>

{% if news %}
<table border="1" cellpadding="10" cellspacing="0" width="100%" style="border-collapse: collapse; text-align: center;">
    <thead style="background-color: #f0f0f0; font-weight: bold;">
        <tr>
            <th>–¢–∏–ø</th>
            <th>–ó–∞–≥–æ–ª–æ–≤–æ–∫</th>
            <th>–î–∞—Ç–∞</th>
            <th>–¢–µ–∫—Å—Ç</th>
            <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
        </tr>
    </thead>
        {% for new in news %}
        <tr>
            <td>{{ new.get_publication_display }}</td>
            <td>
                <a class="nav-link" href="{% url 'new_detail' new.id %}">{{ new.title|censor }}</a>
            </td>
            <td>{{ new.date_creation|date:"d M Y" }}</td>
            <td>{{ new.text|truncatewords:20|censor }}</td>
            <td>
                {% for category in new.post_category.all %}
                    <a href="{% url 'category_news' category.id %}">{{ category }}</a>{% if not forloop.last %}, {% endif %}
                {% endfor %}
            </td>
        </tr>
        {% endfor %}
</table>
{% else %}
<div style="text-align: center; padding: 20px; border: 1px solid #ccc; background-color: #f9f9f9;">
    <h2>–ü—É–±–ª–∏–∫–∞—Ü–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã üòî</h2>
</div>
{% endif %}

<hr>

{# –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ #}
{% if page_obj.has_previous %}
    <a href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page=1">1</a>
    {% if page_obj.previous_page_number != 1 %}
        ...
        <a href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ page_obj.previous_page_number }}">{{ page_obj.previous_page_number }}</a>
    {% endif %}
{% endif %}

{{ page_obj.number }}

{% if page_obj.has_next %}
    <a href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ page_obj.next_page_number }}">{{ page_obj.next_page_number }}</a>
    {% if page_obj.next_page_number != paginator.num_pages %}
        ...
        <a href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ paginator.num_pages }}">{{ paginator.num_pages }}</a>
    {% endif %}
{% endif %}

<hr>
<a href="{% url 'news_list' %}" class="btn btn-secondary">‚Üê –ù–∞–∑–∞–¥ –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>

{% endblock content %}
