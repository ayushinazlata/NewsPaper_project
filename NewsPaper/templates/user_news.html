<!--  –Ω–∞—Å–ª–µ–¥—É–µ–º—Å—è –æ—Ç —à–∞–±–ª–æ–Ω–∞ default.html, –∫–æ—Ç–æ—Ä—ã–π –º—ã —Å–æ–∑–¥–∞–≤–∞–ª–∏ –¥–ª—è flatpages -->
{% extends 'flatpages/default.html' %}

{% block title %}
–ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
{% endblock title %}

{% block content %}
<h1 style="text-align: center; margin-bottom: 20px;">‚óÑ –ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è ‚ñ∫</h1>
<h6 style="text-align: center; color: #555;"><i>–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–æ {{user_news|length}} –∏–∑ {{paginator.count}} –æ–±—ä—è–≤–ª–µ–Ω–∏–π</i></h6>

<hr style="margin: 20px 0;">

<form action="" method="get">
   {{ filterset.form.as_p }}
   <input type="submit" value="–ù–∞–π—Ç–∏" />
</form>
<hr>


{% if user_news %}
<table border="1" cellpadding="10" cellspacing="0" width="100%" style="border-collapse: collapse; text-align: center;">
    <thead style="background-color: #f0f0f0; font-weight: bold;">
        <tr>
            <td>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</td>
            <td>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</td>
            <td>–ó–∞–≥–æ–ª–æ–≤–æ–∫</td>
            <td>–¢–µ–∫—Å—Ç</td>
            {% if perms.news.edit_post or perms.news.delete_post %}
            <td>–î–µ–π—Å—Ç–≤–∏—è</td>
            {% endif %}
        </tr>
    </thead>

        {% for new in user_news %}
        <tr>
            <td>{{ new.date_creation|date:'d M Y' }}</td>
            <td>
                {% for category in new.post_category.all %}
                    {{ category.name_category }}
                    {% if not forloop.last %}, {% endif %}
                {% endfor %}
            </td>
            <td>
                <a href="{% url 'new_detail' new.id %}">{{ new.title }}</a>
            </td>
            <td>{{ new.text|truncatechars:30 }}</td>
            <td>
                {% if perms.news.edit_post %}
                <form action="{% url 'new_edit' pk=new.id %}" method="get">
                    <input type="submit" value="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å" />
                </form>
                {% endif %}
                {% if perms.news.delete_post %}
                <form action="{% url 'new_delete' new.id %}" method="get">
                    <input type="submit" value="–£–¥–∞–ª–∏—Ç—å" />
                </form>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
</table>
{% else %}
<div style="text-align: center; padding: 20px; border: 1px solid #ccc; background-color: #f9f9f9;">
    <h2>–û–±—ä—è–≤–ª–µ–Ω–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω–æ üòî</h2>
</div>
{% endif %}

{# –î–æ–±–∞–≤–ª—è–µ–º –ø–∞–≥–∏–Ω–∞—Ü–∏—é –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É #}

   {# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö #}
   {% if page_obj.has_previous %}
       <a href="?page=1">1</a>
       {% if page_obj.previous_page_number != 1 %}
           ...
           <a href="?page={{ page_obj.previous_page_number }}">{{ page_obj.previous_page_number }}</a>
       {% endif %}
   {% endif %}

   {# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ #}
   {{ page_obj.number }}

   {# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö #}
   {% if page_obj.has_next %}
       <a href="?page={{ page_obj.next_page_number }}">{{ page_obj.next_page_number }}</a>
       {% if paginator.num_pages != page_obj.next_page_number %}
           ...
           <a href="?page={{ page_obj.paginator.num_pages }}">{{ page_obj.paginator.num_pages }}</a>
       {% endif %}
   {% endif %}

<hr>
<a href="{% url 'news_list' %}" class="btn btn-secondary">‚Üê –ù–∞–∑–∞–¥ –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>

{% endblock content %}